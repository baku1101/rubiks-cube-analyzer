# スマートキューブアプリ 要件定義書

## 1. 目的・意義

本アプリケーションは、Bluetooth接続可能なスマートキューブのソルブを解析し、ユーザーの技術向上を支援することを目的とする。特に以下の点に重点を置く：

1. **ターゲットユーザー**
   - 初心者から中級者のキューブ愛好家
   - 特にマイナー解法（APBメソッド、Epidoteメソッド）の習得・向上を目指すユーザー

2. **差別化ポイント**
   - 各ステップにおける最適解の提案機能
   - マイナー解法に対応した詳細な解析機能
   - 段階的なトレーニング機能による上達支援

## 2. プラットフォーム

1. **モバイルアプリ（優先）**
   - iOS
   - Android
2. **デスクトップアプリ**
   - windows向け（簡易デバッグのため）

3. **Webアプリケーション（二次的目標）**
   - レスポンシブデザインによる各種デバイス対応

## 3. 機能要件（優先順位順）

### 3.1 基本ソルブモードと解析機能（最優先）

1. **基本ソルブ機能**
   - スマートキューブとのBluetooth接続設定
   - タイマー機能（開始、停止、リセット）
   - リアルタイムのキューブ状態可視化

2. **ソルブ解析機能**
   - 総ステップ数、TPS（Turns Per Second）の計測
   - 解法ごとの各ステップにかかった時間の分析
   - 回転効率の分析（回転数最適化の提案）
   - 特定のステップでの停滞ポイントの検出

3. **改善提案機能**
   - F2Lなどにおける最適な手順の提案
   - 同じ結果を得るための効率的な手順の提示
   - 定型パターンの場合：データベースからの最適解提示
   - 非定型パターン（クロスなど）の場合：アルゴリズム解析による手順提案

### 3.2 トレーニングモード（第二優先）

1. **ステップ別練習機能**
   - 特定のステップ（F2L、OLL、PLLなど）に特化した練習モード
   - APB、Epidoteなどマイナー解法の各ステップ別トレーニング

2. **ガイド付き練習モード**
   - 各ステップの回し方の視覚的ガイド
   - 手順ごとのアニメーション表示
   - 正しい指使いの提案

3. **進捗トラッキング**
   - トレーニングの成果測定
   - 弱点パターンの自動検出と集中練習の提案

### 3.3 ソルブデータ管理システム（第三優先）

1. **履歴管理機能**
   - ソルブ記録の保存と閲覧
   - 統計情報の表示（平均タイム、ベストタイムなど）

2. **進捗分析**
   - 時系列でのパフォーマンス変化の可視化
   - 各ステップの上達度合いの分析

3. **データエクスポート/インポート**
   - データのバックアップ/復元機能
   - 異なるデバイス間でのデータ同期

## 4. 画面設計

### 4.1 ホーム画面
- 最近のソルブ統計概要
- モード選択（ソルブ、トレーニング、解析）
- キューブ接続状態表示
- クイックスタートボタン

### 4.2 ソルブ画面
- タイマー表示（大）
- 現在のキューブ状態表示
- スクランブル情報
- ライブステップ検出インジケーター

### 4.3 解析画面
- ソルブ全体の概要（総時間、TPS、回転数）
- ステップ別詳細（時間、効率性）
- 改善提案セクション
- キューブ動作の再生機能

### 4.4 トレーニング画面
- トレーニングモード選択メニュー
- 手順ガイド表示
- 進捗表示
- 練習ステータス（正解/不正解）

### 4.5 履歴・統計画面
- ソルブ履歴リスト
- 統計グラフ（時間推移、ステップ別効率など）
- フィルター機能

### 4.6 設定画面
- 解法設定（CFOP、APB、Epidoteなど）
- Bluetooth設定
- 表示設定
- データ管理オプション

## 5. 開発方針

### 5.1 技術スタック
- **フロントエンド**: Flutter（クロスプラットフォーム対応）
- **バックエンド**: Firebase（認証、データベース、同期）
- **Bluetooth連携**: Flutter Blue/Flutter BLE
- **解析エンジン**: カスタムアルゴリズム（最短手順計算）

### 5.2 開発アプローチ
- **段階的実装**:
  1. MVP（最小実行製品）: 基本ソルブ機能と簡易解析
  2. トレーニングモード拡張
  3. 履歴管理と詳細統計機能

- **テスト戦略**:
  - 各機能実装後の小規模テスト
  - 各フェーズ完了後の統合テスト
  - 実際のキューブを用いた実機テスト

### 5.3 リリース計画
- **α版**: 個人使用向け基本機能実装
- **β版**: マイナー解法（APB、Epidote）対応完了
- **v1.0**: 基本機能セット完成、限定公開
- **v2.0**: 一般的解法（CFOP等）のサポート追加、一般公開

## 6. 将来的な拡張可能性

1. **一般的解法対応の拡充**
   - CFOP、Roux、ZZ等の主要解法への対応拡大

2. **コミュニティ機能**
   - ユーザー間でのソルブ共有・比較機能
   - 解法情報の交換

3. **アルゴリズムライブラリ**
   - 総合的な手順集の実装
   - カスタムアルゴリズムの登録機能

この要件定義に基づき、まずは個人使用に適したMVPの開発から着手し、段階的に機能を拡充していくことで、効率的かつ確実な開発プロセスを実現することが推奨される。